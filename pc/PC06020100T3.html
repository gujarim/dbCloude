<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>출퇴근관리>전사 근태현황(월간)</title>

    <link rel="stylesheet" href="css/ui.jqgrid.css">
    <link rel="stylesheet" href="css/jstree.style.css">
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="wrap">
        <header id="header"></header>
        <nav id="nav"></nav>

        <div class="container">
            <div class="tit-box">
                <h2 class="tit-h2">전사 근태현황</h2>
            </div>

            <div class="search-box">
                <table>
                    <caption>조직명, 사용자, 부서로 구성된 통합게시판에 대한 표</caption>
                    <colgroup>
                        <col style="width: 7.3rem">
                        <col style="width: 25%">
                        <col style="width: 7.3rem">
                        <col style="width: 25%">
                        <col style="width: 7.3rem">
                        <col style="width: 25%">
                    </colgroup>
                    <tbody>
                        <tr>
                            <th>조직명</th>
                            <td>
                                <select name="" id="">
                                    <option value="">선택</option>
                                    <option value="" selected>DB INC</option>
                                </select>
                            </td>
                            <th>사용자</th>
                            <td><input type="text" placeholder="사용자 입력"></td>
                            <th>부서</th>
                            <td><input type="text" placeholder="부서 입력"></td>
                        </tr>
                    </tbody>
                </table>
                <button type="button" class="i-search">조회</button>
            </div>

            <!-- 날짜별 전사근테현황 -->
            <div class="tab-wrap -box mb40">
                <ul class="tablist -sm" role="tablist">
                    <li role="tab"><a href="">오늘</a></li>
                    <li role="tab"><a href="">일간</a></li>
                    <li class="on" role="tab"><a href="">월간</a></li>
                </ul>
                <div class="panels">
                    <div role="tabpanel">오늘</div>
                    <div role="tabpanel">일간</div>
                    <div class="on" role="tabpanel">
                        <strong class="date">
                            <button type="button" class="prev">이전</button>
                            <span>2025.06</span>
                            <button type="button" class="next">다음</button>
                        </strong>
                        
                        <div class="table-jq -scroll">
                            <div class="hgroup">
                                <p>총 <em class="f-primary">143</em>건</p>

                                <div class="sort">
                                    <button type="button" class="btn -line">엑셀 다운로드</button>
                                </div>
                            </div>
                        
                            <table id="grid1"></table>
                            <div id="pager1"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 변경이력 -->
            <div class="table-jq">
                <div class="hgroup">
                    <strong>변경이력</strong>
                </div>

                <table id="grid4"></table>
                <div id="pager4"></div>
            </div>
        </div>

        <footer id="footer"></footer>
    </div>
</body>
</html>

<script src="js/include.js" defer></script>
<script src="js/jquery-3.6.0.min.js"></script>
<script src="js/fullcalendar.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/grid.locale-en.js"></script>
<script src="js/jquery.jqGrid.min.js"></script>
<script src="js/jstree.js"></script>
<script src="js/slick.min.js"></script>
<script src="js/ui-content.js"></script>

<script>
    $(document).ready(function () {
        //월간
        var localData = [
            { 
                inx1: "1", //No
                inx2: "이디비 \n userm3", //성명
                inx3: "출근", //구분
                inx4: "-",
                inx5: "07:53",
                inx6: "-",
                inx7: "-",
                inx8: "07:53",
                inx9: "07:53",
                inx10: "07:53",
                inx11: "07:53",
                inx12: "07:53",
                inx13: "07:53",
                inx14: "-",
                inx15: "07:53",
                inx16: "-",
                inx17: "-",
                inx18: "07:53",
                inx19: "07:53",
                inx20: "07:53",
                inx21: "07:53",
                inx22: "07:53",
                inx23: "07:53",
                inx24: "-",
                inx25: "07:53",
                inx26: "-",
                inx27: "-",
                inx28: "07:53",
                inx29: "07:53",
                inx30: "07:53"
            },
            { 
                inx1: "1", //No
                inx2: "이디비 \n userm3", //성명
                inx3: "퇴근", //구분
                inx4: "-",
                inx5: "07:53",
                inx6: "-",
                inx7: "-",
                inx8: "07:53",
                inx9: "07:53",
                inx10: "07:53",
                inx11: "07:53",
                inx12: "07:53",
                inx13: "07:53",
                inx14: "-",
                inx15: "07:53",
                inx16: "-",
                inx17: "-",
                inx18: "07:53",
                inx19: "07:53",
                inx20: "07:53",
                inx21: "07:53",
                inx22: "07:53",
                inx23: "07:53",
                inx24: "-",
                inx25: "07:53",
                inx26: "-",
                inx27: "-",
                inx28: "07:53",
                inx29: "07:53",
                inx30: "07:53"
            },
            { 
                inx1: "1", //No
                inx2: "이디비 \n userm3", //성명
                inx3: "유형", //구분
                inx4: "-",
                inx5: "07:53",
                inx6: "-",
                inx7: "-",
                inx8: "07:53",
                inx9: "07:53",
                inx10: "07:53",
                inx11: "07:53",
                inx12: "07:53",
                inx13: "07:53",
                inx14: "-",
                inx15: "07:53",
                inx16: "-",
                inx17: "-",
                inx18: "07:53",
                inx19: "07:53",
                inx20: "07:53",
                inx21: "07:53",
                inx22: "07:53",
                inx23: "07:53",
                inx24: "-",
                inx25: "07:53",
                inx26: "-",
                inx27: "-",
                inx28: "07:53",
                inx29: "07:53",
                inx30: "07:53"
            },
            { 
                inx1: "1", //No
                inx2: "이디비 \n userm3", //성명
                inx3: "근태사항", //구분
                inx4: "-",
                inx5: "07:53",
                inx6: "-",
                inx7: "-",
                inx8: "07:53",
                inx9: "07:53",
                inx10: "07:53",
                inx11: "07:53",
                inx12: "07:53",
                inx13: "07:53",
                inx14: "-",
                inx15: "07:53",
                inx16: "-",
                inx17: "-",
                inx18: "07:53",
                inx19: "07:53",
                inx20: "07:53",
                inx21: "07:53",
                inx22: "07:53",
                inx23: "07:53",
                inx24: "-",
                inx25: "07:53",
                inx26: "-",
                inx27: "-",
                inx28: "07:53",
                inx29: "07:53",
                inx30: "07:53"
            },
            { 
                inx1: "2", //No
                inx2: "김디비 \n userm3", //성명
                inx3: "출근", //구분
                inx4: "-",
                inx5: "07:53",
                inx6: "-",
                inx7: "-",
                inx8: "07:53",
                inx9: "07:53",
                inx10: "07:53",
                inx11: "07:53",
                inx12: "07:53",
                inx13: "07:53",
                inx14: "-",
                inx15: "07:53",
                inx16: "-",
                inx17: "-",
                inx18: "07:53",
                inx19: "07:53",
                inx20: "07:53",
                inx21: "07:53",
                inx22: "07:53",
                inx23: "07:53",
                inx24: "-",
                inx25: "07:53",
                inx26: "-",
                inx27: "-",
                inx28: "07:53",
                inx29: "07:53",
                inx30: "07:53"
            },
            { 
                inx1: "2", //No
                inx2: "김디비 \n userm3", //성명
                inx3: "퇴근", //구분
                inx4: "-",
                inx5: "07:53",
                inx6: "-",
                inx7: "-",
                inx8: "07:53",
                inx9: "07:53",
                inx10: "07:53",
                inx11: "07:53",
                inx12: "07:53",
                inx13: "07:53",
                inx14: "-",
                inx15: "07:53",
                inx16: "-",
                inx17: "-",
                inx18: "07:53",
                inx19: "07:53",
                inx20: "07:53",
                inx21: "07:53",
                inx22: "07:53",
                inx23: "07:53",
                inx24: "-",
                inx25: "07:53",
                inx26: "-",
                inx27: "-",
                inx28: "07:53",
                inx29: "07:53",
                inx30: "07:53"
            },
            { 
                inx1: "2", //No
                inx2: "김디비 \n userm3", //성명
                inx3: "유형", //구분
                inx4: "-",
                inx5: "07:53",
                inx6: "-",
                inx7: "-",
                inx8: "07:53",
                inx9: "07:53",
                inx10: "07:53",
                inx11: "07:53",
                inx12: "07:53",
                inx13: "07:53",
                inx14: "-",
                inx15: "07:53",
                inx16: "-",
                inx17: "-",
                inx18: "07:53",
                inx19: "07:53",
                inx20: "07:53",
                inx21: "07:53",
                inx22: "07:53",
                inx23: "07:53",
                inx24: "-",
                inx25: "07:53",
                inx26: "-",
                inx27: "-",
                inx28: "07:53",
                inx29: "07:53",
                inx30: "07:53"
            },
            { 
                inx1: "2", //No
                inx2: "김디비 \n userm3", //성명
                inx3: "근태사항", //구분
                inx4: "-",
                inx5: "07:53",
                inx6: "-",
                inx7: "-",
                inx8: "07:53",
                inx9: "07:53",
                inx10: "07:53",
                inx11: "07:53",
                inx12: "07:53",
                inx13: "07:53",
                inx14: "-",
                inx15: "07:53",
                inx16: "-",
                inx17: "-",
                inx18: "07:53",
                inx19: "07:53",
                inx20: "07:53",
                inx21: "07:53",
                inx22: "07:53",
                inx23: "07:53",
                inx24: "-",
                inx25: "07:53",
                inx26: "-",
                inx27: "-",
                inx28: "07:53",
                inx29: "07:53",
                inx30: "07:53"
            }
        ];
        $("#grid1").jqGrid({
            datatype: "local", // 로컬 데이터를 사용합니다.
            data: localData, // 로컬 데이터를 그리드에 바인딩합니다.
            colNames: [
                'No', 
                '성명',
                '구분',
                '1',
                '2',
                '3',
                '4',
                '5',
                '6',
                '7',
                '8',
                '9',
                '10',
                '11',
                '12',
                '13',
                '14',
                '15',
                '16',
                '17',
                '18',
                '19',
                '20',
                '21',
                '22',
                '23',
                '24',
                '25',
                '26',
                '27'
            ], // 그리드 헤더 이름
            colModel: [
                { name: 'inx1', index: 'inx1', width: 55, sortable: false},
                { name: 'inx2', index: 'inx2', width: 120, sortable: false},
                { name: 'inx3', index: 'inx3', width: 120, sortable: false},
                { name: 'inx4', index: 'inx4', width: 62, sortable: false},
                { name: 'inx5', index: 'inx5', width: 62, sortable: false},
                { name: 'inx6', index: 'inx6', width: 62, sortable: false},
                { name: 'inx7', index: 'inx7', width: 62, sortable: false},
                { name: 'inx8', index: 'inx8', width: 62, sortable: false},
                { name: 'inx9', index: 'inx9', width: 62, sortable: false},
                { name: 'inx10', index: 'inx10', width: 62, sortable: false},
                { name: 'inx11', index: 'inx11', width: 62, sortable: false},
                { name: 'inx12', index: 'inx12', width: 62, sortable: false},
                { name: 'inx13', index: 'inx13', width: 62, sortable: false},
                { name: 'inx14', index: 'inx14', width: 62, sortable: false},
                { name: 'inx15', index: 'inx15', width: 62, sortable: false},
                { name: 'inx16', index: 'inx16', width: 62, sortable: false},
                { name: 'inx17', index: 'inx17', width: 62, sortable: false},
                { name: 'inx18', index: 'inx18', width: 62, sortable: false},
                { name: 'inx19', index: 'inx19', width: 62, sortable: false},
                { name: 'inx20', index: 'inx20', width: 62, sortable: false},
                { name: 'inx21', index: 'inx21', width: 62, sortable: false},
                { name: 'inx22', index: 'inx22', width: 62, sortable: false},
                { name: 'inx23', index: 'inx23', width: 62, sortable: false},
                { name: 'inx24', index: 'inx24', width: 62, sortable: false},
                { name: 'inx25', index: 'inx25', width: 62, sortable: false},
                { name: 'inx26', index: 'inx26', width: 62, sortable: false},
                { name: 'inx27', index: 'inx27', width: 62, sortable: false},
                { name: 'inx28', index: 'inx28', width: 62, sortable: false},
                { name: 'inx29', index: 'inx29', width: 62, sortable: false},
                { name: 'inx30', index: 'inx30', width: 62, sortable: false}
            ],
            pager: '#pager1', // 페이징을 위한 요소
            rowNum: 8,
            sortname: 'id', // 기본 정렬할 컬럼
            viewrecords: true, // 총 레코드 수 표시 여부
            height: 'auto', // 그리드 높이를 자동 조절
            autowidth: true, // 그리드 너비를 자동 조절
            shrinkToFit :false,
            loadComplete: function () {
                createCustomPager("grid1", "#pager1"); // 데이터 로드 후 커스텀 페이징 생성
            },
            gridComplete: function () {
                const $rows = $("#grid1").find("tr.jqgrow");
                const columnsToMerge = ['inx1', 'inx2'];

                columnsToMerge.forEach(colName => {
                    let prevCell = null;
                    let rowspan = 1;

                    $rows.each(function (i, row) {
                        const $cell = $(row).find(`td[aria-describedby="grid1_${colName}"]`);

                        if (!prevCell) {
                            prevCell = $cell;
                            return;
                        }

                        if ($cell.text() === prevCell.text()) {
                            $cell.remove();
                            rowspan++;
                            prevCell.attr("rowspan", rowspan);
                            prevCell.css("vertical-align", "middle");
                        } else {
                            prevCell = $cell;
                            rowspan = 1;
                        }
                    });
                });
            }
        });


        // 변경이력
        var localData4 = [
            { 
                inx1: "1", //No
                inx2: "개발2팀/이디비/userm3", //대상자 정보
                inx3: "2025.05.27 09:44", //변경일시
                inx4: "개발2팀/이디비", //변경자 정보
                inx5: "211.147.44.106", //IP
                inx6: "수정", //변경상태
                inx7: "출근", //변경타입
                inx8: "13:17:24", //변경전
                inx9: "출근 후 버튼 미선택", //변경사유
            }
        ];
        $("#grid4").jqGrid({
            datatype: "local", // 로컬 데이터를 사용합니다.
            data: localData4, // 로컬 데이터를 그리드에 바인딩합니다.
            colNames: [
                'No', 
                '대상자 정보',
                '변경일시',
                '변경자 정보',
                'IP',
                '변경상태',
                '변경타입',
                '변경전',
                '변경사유'
            ], // 그리드 헤더 이름
            colModel: [
                { name: 'inx1', index: 'inx1', width: '5%', sortable: false},
                { name: 'inx2', index: 'inx2', width: '10%', sortable: false},
                { name: 'inx3', index: 'inx3', width: '10%', sortable: false},
                { name: 'inx4', index: 'inx4', width: '10%', sortable: false},
                { name: 'inx5', index: 'inx5', width: '10%', sortable: false},
                { name: 'inx6', index: 'inx6', width: '5%', sortable: false},
                { name: 'inx7', index: 'inx7', width: '5%', sortable: false},
                { name: 'inx8', index: 'inx8', width: '5%', sortable: false},
                { name: 'inx9', index: 'inx9', width: '13%', sortable: false}
            ],
            pager: '#pager4', // 페이징을 위한 요소
            rowNum: 2,
            sortname: 'id', // 기본 정렬할 컬럼
            viewrecords: true, // 총 레코드 수 표시 여부
            height: 'auto', // 그리드 높이를 자동 조절
            autowidth: true, // 그리드 너비를 자동 조절
            loadComplete: function () {
                createCustomPager("grid4", "#pager4"); // 데이터 로드 후 커스텀 페이징 생성
            }
        });
    });
</script>